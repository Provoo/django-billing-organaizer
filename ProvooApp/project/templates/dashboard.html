{% extends "dashboard_base.html" %}
{% load i18n %}
{% block head_title %}Dashboard{% endblock %}

{% block dashboard-content %}

<div class="page-title">
  {# <h1>Portafolio</h1>#}
  <p class="dashboard-title">
    <h1 class="">Portafolio</h1>
    <br>
    <span>{{ portafolio.Nombre }}</span>
    <br>
    <small>
      {{ portafolio.Ruc }}
    |
      <a href="{% url 'user_documentos' request.user.id portafolio.Ruc %}">Ver facturas</a>
    </small>
  </p>
</div>

<div class="row">
       <div class="col l4 s12">
           <a href="#" class="card-panel stats-card gradiant-purple indigo-text text-lighten-5">
             <div class="progress small purple lighten-1">
                 <div class="purple darken-1" style="width: 42%"></div>
             </div>
             <i class="fa fa-credit-card"></i>
             <span class="count">USD {{ portafolio.total_gastos }}</span>
             <div class="name">CONSUMOS</div>
             <div class="name">1 de enero - 30 de abril</div>
           </a>
       </div>
       <div class="col l4 s12">
           <a href="#" class="card-panel stats-card gradiant-purple blue-text text-lighten-5">
             <div class="progress small purple lighten-1">
                 <div class="purple darken-1" style="width: 42%"></div>
             </div>
             <i class="fa fa-percent"></i>
             <span class="count">USD {{ portafolio.total_impuestos }}</span>
             <div class="name">Impuestos</div>
             <div class="name">1 de enero - 30 de abril</div>

           </a>
       </div>
       <div class="col l4 s12">
           <div class="card-panel stats-card gradiant-purple green-text text-lighten-5">
               <div class="progress small purple lighten-1">
                   <div class="purple darken-1" style="width: 42%"></div>
               </div>

               <i class="fa fa-dollar"></i>
               <span class="count">USD {{ portafolio.total_portafolio }}</span>
               <div class="name">Total</div>
               <div class="name">1 de enero - 30 de abril</div>

           </div>
       </div>
   </div>
  <div class="row">

    <div class="card">
      <div class="title">
        <h5>Deducibles</h5>
        <a class="minimize" href="#"> <i class="mdi-navigation-expand-less"></i> </a>
      </div>
      <div class="content">
        <div class="col l4 s12">
            <div class="card-panel stats-card grey-text grey lighten-5">
                <div class="progress small purple lighten-1">
                    <div class="purple darken-1" style="width: 42%"></div>
                </div>
                <i class="fa fa-home"></i>
                <span class="count">USD {{ portafolio.total_vivienda }}</span>
                <div class="name">Vivienda</div>
                <div class="name">1 de enero - 30 de abril</div>
            </div>
          </div>
          <div class="col l4 s12">
              <div class="card-panel stats-card grey-text grey lighten-5">
                  <div class="progress small purple lighten-1">
                      <div class="purple darken-1" style="width: 42%"></div>
                  </div>
                  <i class="glyphicon glyphicon-education"></i>
                  <span class="count">USD {{ portafolio.total_educacion }}</span>
                  <div class="name">Educaci√≥n</div>
                  <div class="name">1 de enero - 30 de abril</div>
              </div>
            </div>

            <div class="col l4 s12">
                <div class="card-panel stats-card grey-text grey lighten-5">
                    <div class="progress small purple lighten-1">
                        <div class="purple darken-1" style="width: 42%"></div>
                    </div>
                    <i class="fa fa-dollar"></i>
                    <span class="count">USD {{ portafolio.total_portafolio }}</span>
                    <div class="name">Total</div>
                    <div class="name">1 de enero - 30 de abril</div>
                </div>
              </div>
              <div class="col l4 s12">
                  <div class="card-panel stats-card grey-text grey lighten-5">
                      <div class="progress small purple lighten-1">
                          <div class="purple darken-1" style="width: 42%"></div>
                      </div>
                      <i class="fa fa-dollar"></i>
                      <span class="count">USD {{ portafolio.total_portafolio }}</span>
                      <div class="name">Total</div>
                      <div class="name">1 de enero - 30 de abril</div>
                  </div>
                </div>
                <div class="col l4 s12">
                    <div class="card-panel stats-card grey-text grey lighten-5">
                        <div class="progress small purple lighten-1">
                            <div class="purple darken-1" style="width: 42%"></div>
                        </div>
                        <i class="fa fa-dollar"></i>
                        <span class="count">USD {{ portafolio.total_portafolio }}</span>
                        <div class="name">Total</div>
                        <div class="name">1 de enero - 30 de abril</div>
                    </div>
                  </div>

                  <div class="col l4 s12">
                      <div class="card-panel stats-card grey-text grey lighten-5">
                          <div class="progress small purple lighten-1">
                              <div class="purple darken-1" style="width: 42%"></div>
                          </div>
                          <i class="fa fa-dollar"></i>
                          <span class="count">USD {{ portafolio.total_portafolio }}</span>
                          <div class="name">Total</div>
                          <div class="name">1 de enero - 30 de abril</div>
                      </div>
                    </div>

        </div>


   </div>

           <div class="row sortable">
               <!-- Stacked Area Chart -->
               <div class="col s12 l7">
                   <div class="card">
                       <div class="title">
                           <h5>Statistics</h5>
                           <a class="close" href="#">
                               <i class="mdi-content-clear"></i>
                           </a>
                           <a class="minimize" href="#">
                               <i class="mdi-navigation-expand-less"></i>
                           </a>
                       </div>
                       <div class="content">
                           <div id="flotLineChart" style="height: 300px"></div>
                       </div>
                   </div>
               </div>
               <!-- /Stacked Area Chart -->

               <!-- Pie Chart -->
               <div class="col s12 l5">
                   <div class="card">
                       <div class="title">
                           <h5>Browsers</h5>
                           <a class="close" href="#">
                               <i class="mdi-content-clear"></i>
                           </a>
                           <a class="minimize" href="#">
                               <i class="mdi-navigation-expand-less"></i>
                           </a>
                       </div>
                       <div class="content">
                           <div id="flotPieChart" style="height: 300px"></div>
                       </div>
                   </div>
               </div>
               <!-- /Pie Chart -->
           </div>

  </div>


{% endblock %}


{% block scripts %}
    {{ block.super }}
    <script>
   /*
    * Sparkline in Card panel
    */
   (function() {
       $("#sparkcard1").conSparkline([76, 78, 87, 65, 43, 35, 23, 25, 12, 14, 27, 35, 32, 37, 31, 46, 43, 32, 36, 57, 78, 87, 82, 75, 58, 54, 70, 23, 54, 67, 34, 23, 87, 12, 43, 65, 23, 76, 32, 55], {
           type: 'bar',
           width: '100%',
           height: 20,
           barColor: '#2196f3'
       });
   }());


   var rickshawLine1 = [{
       "x": 0,
       "y": 13
   }, {
       "x": 1,
       "y": 12
   }, {
       "x": 2,
       "y": 24
   }, {
       "x": 3,
       "y": 25
   }, {
       "x": 4,
       "y": 12
   }, {
       "x": 5,
       "y": 16
   }, {
       "x": 6,
       "y": 24
   }, {
       "x": 7,
       "y": 13
   }, {
       "x": 8,
       "y": 12
   }, {
       "x": 9,
       "y": 11
   }];
   var rickshawLine2 = [{
       "x": 0,
       "y": 16
   }, {
       "x": 1,
       "y": 23
   }, {
       "x": 2,
       "y": 17
   }, {
       "x": 3,
       "y": 16
   }, {
       "x": 4,
       "y": 22
   }, {
       "x": 5,
       "y": 25
   }, {
       "x": 6,
       "y": 21
   }, {
       "x": 7,
       "y": 22
   }, {
       "x": 8,
       "y": 12
   }, {
       "x": 9,
       "y": 13
   }];

   /*
    * Rickshaw Stacked Area Chart
    */
   (function() {
       var element = $("#rickshawStackedArea");
       var graph = new Rickshaw.Graph({
           element: element[0],
           renderer: 'area',
           stroke: false,
           series: [{
               data: rickshawLine1,
               color: '#42a5f5',
               name: 'Visits'
           }, {
               data: rickshawLine2,
               color: '#90caf9',
               name: 'Views'
           }]
       });
       graph.render();

       var hoverDetail = new Rickshaw.Graph.HoverDetail({
           graph: graph,
           xFormatter: function(x) {
               return x
           },
           yFormatter: function(y) {
               return y
           }
       });

       // responsive
       $(window).on('resize', function() {
           graph.configure({
               width: element.width()
           });
           graph.render();
       });
   }());


   /*
    * Rickshaw Stacked Bars
    */
   (function() {
       var element = $("#rickshawStackedBars");
       var graph = new Rickshaw.Graph({
           element: element[0],
           renderer: 'bar',
           series: [{
               data: rickshawLine1,
               color: '#26a69a',
               name: 'Visits'
           }, {
               data: rickshawLine2,
               color: '#80cbc4',
               name: 'Views'
           }]
       });
       graph.render();

       var hoverDetail = new Rickshaw.Graph.HoverDetail({
           graph: graph,
           xFormatter: function(x) {
               return x
           },
           yFormatter: function(y) {
               return y
           }
       });

       // responsive
       $(window).on('resize', function() {
           graph.configure({
               width: element.width()
           });
           graph.render();
       });
   }());



       /*
        * Flot Line Chart
        */
       (function() {
           var chart = $("#flotLineChart");
           var data1 = {
               data: [
                   [1, 50],
                   [2, 58],
                   [3, 45],
                   [4, 62],
                   [5, 55],
                   [6, 65],
                   [7, 61],
                   [8, 70],
                   [9, 65],
                   [10, 70],
                   [11, 53],
                   [12, 49]
               ],
               label: "Mails"
           };
           var data2 = {
               data: [
                   [1, 25],
                   [2, 31],
                   [3, 23],
                   [4, 48],
                   [5, 38],
                   [6, 40],
                   [7, 47],
                   [8, 55],
                   [9, 43],
                   [10, 50],
                   [11, 37],
                   [12, 29]
               ],
               label: "SMS"
           };
           var data3 = {
               data: [
                   [1, 4],
                   [2, 13],
                   [3, 7],
                   [4, 17],
                   [5, 20],
                   [6, 24],
                   [7, 13],
                   [8, 17],
                   [9, 10],
                   [10, 17],
                   [11, 6],
                   [12, 3]
               ],
               label: "Invoices"
           };
           var options = {
               series: {
                   lines: {
                       show: true,
                       lineWidth: 1,
                       fill: true,
                       fillColor: {
                           colors: [{
                               opacity: 0.1
                           }, {
                               opacity: 0.13
                           }]
                       }
                   },
                   points: {
                       show: true,
                       lineWidth: 2,
                       radius: 3
                   },
                   shadowSize: 0,
                   stack: true
               },
               grid: {
                   hoverable: true,
                   clickable: true,
                   tickColor: "#f9f9f9",
                   borderWidth: 0
               },
               legend: {
                   // show: false
                   backgroundOpacity: 0,
                   labelBoxBorderColor: "#fff"
               },
               colors: ["#3f51b5", "#009688", "#2196f3"],
               xaxis: {
                   ticks: [
                       [1, "Jan"],
                       [2, "Feb"],
                       [3, "Mar"],
                       [4, "Apr"],
                       [5, "May"],
                       [6, "Jun"],
                       [7, "Jul"],
                       [8, "Aug"],
                       [9, "Sep"],
                       [10, "Oct"],
                       [11, "Nov"],
                       [12, "Dec"]
                   ],
                   font: {
                       family: "Roboto,sans-serif",
                       color: "#ccc"
                   }
               },
               yaxis: {
                   ticks: 7,
                   tickDecimals: 0,
                   font: {
                       color: "#ccc"
                   }
               }
           };

           function initFlot() {
               $.plot(chart, [data1, data2, data3], options);
               chart.find('.legend table').css('width', 'auto')
                   .find('td').css('padding', 5);
           }
           initFlot();
           $(window).on('resize', initFlot);

           function showTooltip(x, y, contents) {
               $('<div id="tooltip">' + contents + '</div>').css({
                   position: 'absolute',
                   display: 'none',
                   top: y - 40,
                   left: x - 55,
                   color: "#fff",
                   padding: '5px 10px',
                   'border-radius': '3px',
                   'background-color': 'rgba(0,0,0,0.6)'
               }).appendTo("body").fadeIn(200);
           }

           var previousPoint = null;
           chart.bind("plothover", function(event, pos, item) {
               if (item) {
                   if (previousPoint != item.dataIndex) {
                       previousPoint = item.dataIndex;

                       $("#tooltip").remove();
                       var x = item.datapoint[0].toFixed(0),
                           y = item.datapoint[1].toFixed(0);

                       var month = item.series.xaxis.ticks[item.dataIndex].label;

                       showTooltip(item.pageX, item.pageY,
                           item.series.label + " of " + month + ": " + y);
                   }
               } else {
                   $("#tooltip").remove();
                   previousPoint = null;
               }
           });
       }());



   /*
    * Flot Pie Chart
    */
   (function() {
       var chart = $("#flotPieChart");
       var data = [{
           label: "IE",
           data: 19.5,
           color: "#90a4ae"
       }, {
           label: "Safari",
           data: 4.5,
           color: "#7986cb"
       }, {
           label: "Opera",
           data: 2.3,
           color: "#9575cd"
       }, {
           label: "Firefox",
           data: 36.6,
           color: "#4db6ac"
       }, {
           label: "Chrome",
           data: 36.3,
           color: "#64b5f6"
       }];
       var options = {
           series: {
               pie: {
                   innerRadius: 0.5,
                   show: true
               }
           },
           grid: {
               hoverable: true
           },
           legend: {
               backgroundOpacity: 0,
               labelBoxBorderColor: "#fff"
           },
           tooltip: true,
           tooltipOpts: {
               content: "%p.0%, %s", // show percentages, rounding to 2 decimal places
               shifts: {
                   x: 20,
                   y: 0
               },
               defaultTheme: false
           }
       };

       function initFlot() {
           $.plot(chart, data, options);
           chart.find('.legend table').css('width', 'auto')
               .find('td').css('padding', 5);
       }
       initFlot();
       $(window).on('resize', initFlot);

   }());


   /*
    * MAP 1
    */
   (function() {
       $('#map1').vectorMap({
           map: 'world_mill_en',
           zoom: 2,
           series: {
               regions: [{
                   values: gdpData,
                   scale: ['#e3f2fd', '#2196f3'],
                   normalizeFunction: 'polynomial'
               }]
           },
           backgroundColor: '#fff',
           onRegionTipShow: function(e, el, code) {
               el.html(el.html() + ' (GDP - ' + gdpData[code] + ')');
           }
       });
   }());




   /*
    * Rickshaw
    */
   (function() {
       var rickshawSeries = [
           [],
           []
       ];

       // Create random data
       var randomData = new Rickshaw.Fixtures.RandomData(50);
       for (var i = 0; i < 40; i++) {
           randomData.addData(rickshawSeries);
       }

       // Init Richshaw graph
       var element = $("#rickshawGraph");
       var graph = new Rickshaw.Graph({
           element: element[0],
           height: 253,
           interpolation: 'cardinal',
           renderer: 'area',
           series: [{
               data: rickshawSeries[0],
               color: '#4db6ac',
               name: 'HDD'
           }, {
               data: rickshawSeries[1],
               color: '#b2dfdb',
               name: 'CPU'
           }]
       });

       // Add hover info
       new Rickshaw.Graph.HoverDetail({
           graph: graph
       });

       // Render graph
       graph.render();

       // Live Update
       setInterval(function() {
           randomData.removeData(rickshawSeries);
           randomData.addData(rickshawSeries);
           graph.update();
       }, 1000);

       // Responsive
       $(window).on('resize', function() {
           graph.configure({
               width: element.width()
           });
           graph.render();
       });

   }());


   setTimeout(function() {
       Materialize.toast('Welcome to Con!', 1000);
   }, 1000);
   </script>

{% endblock %}
